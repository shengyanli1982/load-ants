# 服务端配置

这部分配置决定了 Load Ants 如何对外提供服务，包括监听哪些端口来接收 DNS 请求，以及在哪个端口上提供管理和监控服务。

### `server` 配置

`server` 配置块用于定义核心的 DNS 服务监听器。

#### 示例

```yaml
server:
    listen_udp: "0.0.0.0:53"
    listen_tcp: "0.0.0.0:53"
    listen_http: "0.0.0.0:8080"
    tcp_timeout: 10
    http_timeout: 30
```

#### 参数详解

| 参数           | 类型   | 描述                                                                                                                    | 默认值         | 是否必填 |
| :------------- | :----- | :---------------------------------------------------------------------------------------------------------------------- | :------------- | :------- |
| `listen_udp`   | 字符串 | DNS over UDP 服务的监听地址和端口。`0.0.0.0` 表示监听本机所有网络接口。如果需要绑定 53 等特权端口，通常需要管理员权限。 | `0.0.0.0:53`   | **是**   |
| `listen_tcp`   | 字符串 | DNS over TCP 服务的监听地址和端口。                                                                                     | `0.0.0.0:53`   | **是**   |
| `listen_http`  | 字符串 | 内置的 DoH 服务端监听地址和端口。这允许你将 Load Ants 作为一台 DoH 服务器，供其他 DoH 客户端使用。                      | `0.0.0.0:8080` | 否       |
| `tcp_timeout`  | 整数   | 接收 TCP DNS 请求时，一个连接在没有数据传输的情况下保持打开的最长时间（秒）。                                           | `10`           | 否       |
| `http_timeout` | 整数   | 作为 DoH 服务端时，一个 HTTP 连接在没有数据传输的情况下保持打开的最长时间（秒）。                                       | `30`           | 否       |

---

### `admin` 管理服务器

`admin` 配置块用于定义一个独立的 HTTP 服务器，它专门用于运维和监控目的。

#### 示例

```yaml
admin:
    listen: "0.0.0.0:9000"
```

#### 参数详解

| 参数     | 类型   | 描述                                                                                                                                                        | 默认值         | 是否必填                           |
| :------- | :----- | :---------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------- | :--------------------------------- |
| `listen` | 字符串 | 管理服务器的监听地址和端口。该服务器会暴露 `/health` (健康检查) 和 `/metrics` (Prometheus 指标) 这两个重要的 API 端点。建议将其配置在与主服务不同的端口上。 | `0.0.0.0:9000` | **是** (如果提供了 `admin` 配置块) |

> ✨ **专家提示**:
> 将 `admin` 服务与 `server` 服务分离是一种很好的安全实践。你可以将 `server` 的端口（如 53）暴露给局域网或公网，而将 `admin` 的端口（如 9000）只暴露给内部的监控系统或通过防火墙规则进行严格的访问控制。
