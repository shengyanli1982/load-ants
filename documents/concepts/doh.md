# DoH 详解

DNS-over-HTTPS (DoH) 是 Load Ants 实现网络隐私和安全的核心技术。要理解 DoH，我们可以先从一个生活中的类比开始。

### 一个类比：寄明信片 vs 寄密封信

-   **传统 DNS 就像寄一张明信片**。
    当你访问一个网站时，你的设备会发出一个 DNS 查询，这就像是问路："请问 `example.com` 在哪里？" 这个"问路"的过程，就像一张写着完整地址和内容的明信片。从你家（你的设备）到邮局（DNS 服务器），中间经过的每一个邮递员（网络运营商、路由器等）都能清楚地看到你要去哪里。这带来了两个问题：

    1.  **隐私泄露**: 任何人都能看到你的上网记录。
    2.  **内容篡改**: 不怀好意的"邮递员"可能会偷偷给你一个错误的地址，让你去到一个假的或危险的网站，这就是所谓的"DNS 劫持"。

-   **DoH 就像寄一封密封的、无法被外人看透的信件**。
    使用 DoH 时，你的 DNS 查询会被放进一个加密的信封（HTTPS 流量）里。这个信封非常牢固，只有最终的收件人（你指定的 DoH 服务器）才能打开。中间的任何人最多只知道你寄了一封信，但完全不知道信里写了什么，也不知道收件人是谁。

**Load Ants 的角色，就是你身边一个高效、可靠的"私人邮局"，它专门负责把你所有的"明信片"打包成"加密信件"，然后再寄出去。**

### DoH 的工作流程对比

让我们更直观地看看 DoH 改变了什么：

**传统 DNS 流程:**

```
你的设备  --- (❓ "example.com 在哪？" - 明文) --->  网络运营商/路由器  --- (可能被窥探或劫持) --->  DNS 服务器
```

**使用 Load Ants (DoH) 的流程:**

```
你的设备  --- (❓ "example.com 在哪？" - 明文) --->  Load Ants  --- (🔒 加密信封["example.com 在哪？"]) --->  安全的 DoH 服务器
```

在这个流程中，你的 DNS 查询在离开你的本地网络（或 Load Ants 所在的服务器）之前，就已经被牢牢加密。

### DoH 带来的核心优势

-   🔒 **强化隐私保护 (Privacy)**
    由于查询内容被加密，你的互联网服务提供商 (ISP)、咖啡店的 Wi-Fi 提供者或任何网络中间人都无法再通过 DNS 来监控你的上网行为。

-   🛡️ **提升网络安全 (Security)**
    加密可以有效抵御中间人攻击，防止 DNS 缓存投毒和域名劫持。你能确保收到的 DNS 响应是真实、未经篡改的。

-   🌍 **规避网络审查 (Censorship Circumvention)**
    由于 DoH 查询流量与普通的 HTTPS 网页浏览流量混合在一起，它更难被网络防火墙识别和封锁。这有助于你访问那些可能被传统 DNS 技术限制的网站。
